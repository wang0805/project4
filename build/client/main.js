!function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)i=s[p],a[i]&&d.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);d.length;)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([334,1]),n()}({151:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(204),i=n(6),s=n.n(i),l=n(2),c=n.n(l),u=n(20),p=n(202),d=n.n(p),m=n(324),f=n.n(m),h=n(152),y=n.n(h),g=n(59),b=n.n(g),v=n(201),E=n.n(v),S=n(52),w=n.n(S),k=n(74),O=n.n(k),P=n(31),C=n.n(P),j=n(320),_=n.n(j),T=n(325),x=n.n(T),R=n(322),U=n.n(R),D=n(323),M=n.n(D),N=n(321),q=n.n(N);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var F=function(e){return{formControl:{margin:e.spacing.unit},group:{margin:e.spacing.unit},root:{display:"flex"},textField:{flexBasis:200}}},W=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=A(t).call(this))||"object"!==I(n)&&"function"!=typeof n?G(this):n).handleChange=e.handleChange.bind(G(G(e))),e.handleSubmit=e.handleSubmit.bind(G(G(e))),e.state={ticker:"",ordertype:"B",quantity:null,orderstatus:"active",meet_address:"",meet_lat:0,meet_long:0,available_till:"",user_id:""},e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r.Component),n=t,(o=[{key:"getGoogleMaps",value:function(){return this.googleMapsPromise||(this.googleMapsPromise=new Promise(function(e){window.resolveGoogleMapsPromise=function(){e(google),delete window.resolveGoogleMapsPromise};var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBPkUDXc8RZJsFsK-lfvjv6m79PHRyaoUI","&libraries=places&callback=resolveGoogleMapsPromise"),t.async=!0,t.defer=!0,document.body.appendChild(t)})),this.googleMapsPromise}},{key:"componentWillMount",value:function(){this.getGoogleMaps()}},{key:"componentDidMount",value:function(){var e=this;this.forceUpdate();var t=parseInt(this.props.user);this.setState({user_id:t}),this.getGoogleMaps().then(function(t){var n=new t.maps.Map(document.getElementById("smap"),{zoom:10,center:{lat:1.3521,lng:103.8198}}),r=document.getElementById("searchTextField"),a=new t.maps.places.Autocomplete(r,{componentRestrictions:{country:"sg"}});a.addListener("place_changed",function(){var r=a.getPlace(),o=r.geometry.location.lat(),i=r.geometry.location.lng();e.setState({meet_lat:o,meet_long:i,meet_address:r.formatted_address}),document.getElementById("lat").value=o,document.getElementById("long").value=i;var s={lat:parseFloat(o),lng:parseFloat(i)};new t.maps.Marker({position:s,map:n})})})}},{key:"handleChange",value:function(e){var t,n,r;this.setState((t={},n=e.target.name,r=e.target.value,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={ticker:"USDSGD",ordertype:this.state.ordertype,quantity:this.state.quantity,orderstatus:this.state.orderstatus,meet_address:this.state.meet_address,meet_lat:this.state.meet_lat,meet_long:this.state.meet_long,available_till:this.state.available_till,user_id:this.state.user_id};fetch("/order/new",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(){console.log("this is a success!!"),t.props.displayClose(),t.props.update()})}},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",null,a.a.createElement(_.a,{open:this.props.displayadd,onClose:this.props.displayClose,scroll:"paper","aria-labelledby":"scroll-dialog-title"},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement(q.a,{id:"scroll-dialog-title"},"Enter Order"),a.a.createElement(U.a,null,a.a.createElement(M.a,null,"Disclaimers: enter order that would be shown to other users on the map and would allow them to click on the map marker to chat to you"),a.a.createElement("br",null),a.a.createElement(w.a,{disabled:!0,id:"outlined-adornment-amount",className:s()(e.margin,e.textField),variant:"outlined",label:"Ticker",name:"ticker",onChange:this.handleChange,value:"USDSGD",InputProps:{startAdornment:a.a.createElement(O.a,{position:"start"},"T")},fullWidth:!0}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(w.a,{id:"outlined-adornment-amount",className:s()(e.margin,e.textField),variant:"outlined",label:"Quantity",name:"quantity",value:this.state.quantity,onChange:this.handleChange,InputProps:{startAdornment:a.a.createElement(O.a,{position:"start"},"Q")},fullWidth:!0}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(w.a,{id:"searchTextField",className:s()(e.margin,e.textField),variant:"outlined",label:"Meet_address",name:"meet_address",onChange:this.handleChange,InputProps:{startAdornment:a.a.createElement(O.a,{position:"start"},"@")},fullWidth:!0}),a.a.createElement("br",null),a.a.createElement("input",{id:"lat",type:"hidden"}),a.a.createElement("input",{id:"long",type:"hidden"}),a.a.createElement("br",null),a.a.createElement("form",{className:e.container,noValidate:!0},a.a.createElement(w.a,{id:"date",label:"Available till",type:"date",name:"available_till",value:this.state.available_till,onChange:this.handleChange,className:e.textField,InputLabelProps:{shrink:!0}})),a.a.createElement("br",null),a.a.createElement(b.a,{component:"fieldset",className:e.formControl},a.a.createElement(E.a,{component:"legend"},"Buy/Sell"),a.a.createElement(f.a,{"aria-label":"Ordertype",name:"ordertype",className:e.group,value:this.state.ordertype,onChange:this.handleChange},a.a.createElement(y.a,{value:"B",control:a.a.createElement(d.a,null),label:"Buy"}),a.a.createElement(y.a,{value:"S",control:a.a.createElement(d.a,null),label:"Sell"}))),a.a.createElement("div",{style:{width:"100%%",height:200},id:"smap"})),a.a.createElement(x.a,null,a.a.createElement(C.a,{type:"submit",color:"primary"},"Confirm Order"),a.a.createElement(C.a,{onClick:this.props.displayClose,color:"primary"},"Cancel")))))}}])&&B(n.prototype,o),t}();W.propTypes={classes:c.a.object.isRequired},t.a=Object(o.a)(Object(u.withStyles)(F)(W))},307:function(e,t,n){"use strict";(function(e){var r=n(0),a=n.n(r),o=n(308),i=n(861),s=n(862),l=n(99),c=n(309),u=n(313),p=n(317),d=n(332),m=n(151);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,e=!(n=y(t).call(this))||"object"!==f(n)&&"function"!=typeof n?b(this):n,myFunction=e.useridMarker.bind(b(b(e))),e.setLogin=e.setLogin.bind(b(b(e))),e.setUser=e.setUser.bind(b(b(e))),e.setUsername=e.setUsername.bind(b(b(e))),e.state={loggedIn:!1,user:"",username:"",idMarker:null},e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r.Component),n=t,(o=[{key:"useridMarker",value:function(e){this.setState({idMarker:parseInt(e.target.dataset.foo)}),console.log("user marker u clicking ~~~~",e.target.dataset.foo)}},{key:"setLogin",value:function(e){this.setState({loggedIn:e})}},{key:"setUser",value:function(e){this.setState({user:e})}},{key:"setUsername",value:function(e){this.setState({username:e})}},{key:"render",value:function(){var e=this;return a.a.createElement(i.a,null,a.a.createElement("div",null,a.a.createElement(p.a,{loggedin:this.state.loggedIn,user:this.state.user,username:this.state.username,setLogin:this.setLogin,setUser:this.setUser,setUsername:this.setUsername}),a.a.createElement(s.a,null,a.a.createElement(l.a,{path:"/home",render:function(){return a.a.createElement(d.a,{loggedin:e.state.loggedIn,user:e.state.user,username:e.state.username,idMarker:e.state.idMarker,setLogin:e.setLogin,setUser:e.setUser,setUsername:e.setUsername})}}),a.a.createElement(l.a,{path:"/login",render:function(){return a.a.createElement(c.a,{loggedin:e.state.loggedIn,user:e.state.user,username:e.state.username,setLogin:e.setLogin,setUser:e.setUser,setUsername:e.setUsername})}}),a.a.createElement(l.a,{path:"/signup",render:function(){return a.a.createElement(u.a,{loggedin:e.state.loggedIn,user:e.state.user,username:e.state.username})}}),a.a.createElement(l.a,{path:"/neworder",render:function(){return a.a.createElement(m.a,{loggedin:e.state.loggedIn,user:e.state.user,username:e.state.username})}}))))}}])&&h(n.prototype,o),t}();t.a=Object(o.hot)(e)(v)}).call(this,n(251)(e))},309:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(154),i=n(204),s=n(6),l=n.n(s),c=n(2),u=n.n(c),p=n(20),d=n(36),m=n.n(d),f=n(65),h=n.n(f),y=n(86),g=n.n(y),b=n(74),v=n.n(b),E=n(59),S=n.n(E),w=n(147),k=n.n(w),O=n(148),P=n.n(O),C=n(23),j=n.n(C),_=n(31),T=n.n(_);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var N=function(e){return{root:{flexGrow:1},margin:{margin:e.spacing.unit},withoutLabel:{marginTop:3*e.spacing.unit},textField:{flexBasis:200},button:{margin:e.spacing.unit}}},q=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=U(t).call(this))||"object"!==x(n)&&"function"!=typeof n?M(this):n).handleSubmit=e.handleSubmit.bind(M(M(e))),e.handleChange=e.handleChange.bind(M(M(e))),e.handleClickShowPassword=e.handleClickShowPassword.bind(M(M(e))),e.state={name:"",password:"",username:"",showPassword:!1},e}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,r.Component),n=t,(i=[{key:"readCookie",value:function(e){for(var t={},n=e.split(";"),r=0;r<n.length;r++){var a=n[r].split("=");t[a[0]]=a[1]}return t}},{key:"handleChange",value:function(e){var t,n,r;this.setState((t={},n=e.target.name,r=e.target.value,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))}},{key:"handleClickShowPassword",value:function(){this.setState(function(e){return{showPassword:!e.showPassword}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={name:this.state.name,password:this.state.password};console.log(n),fetch("/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(){console.log(t.readCookie(document.cookie));var e=t.readCookie(document.cookie);e.logged_in&&(t.props.setLogin(!0),t.props.setUser(parseInt(e[" user_id"])),t.props.setUsername(e[" username"]),t.props.history.push("/home"))})}},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",{className:e.root},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement(j.a,{container:!0,spacing:24},a.a.createElement(j.a,{item:!0,xs:12},a.a.createElement(j.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},a.a.createElement(j.a,{item:!0},a.a.createElement(S.a,{className:l()(e.margin,e.textField)},a.a.createElement(g.a,{htmlFor:"adornment-name"},"Username"),a.a.createElement(h.a,{id:"adornment-name",name:"name",inputProps:{"aria-label":"Name"},onChange:this.handleChange}))),a.a.createElement(j.a,{item:!0},a.a.createElement(S.a,{className:l()(e.margin,e.textField)},a.a.createElement(g.a,{htmlFor:"adornment-password"},"Password"),a.a.createElement(h.a,{id:"adornment-password",type:this.state.showPassword?"text":"password",name:"password",onChange:this.handleChange,endAdornment:a.a.createElement(v.a,{position:"end"},a.a.createElement(m.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.showPassword?a.a.createElement(k.a,null):a.a.createElement(P.a,null)))}))),a.a.createElement("br",null),a.a.createElement(j.a,{item:!0},a.a.createElement(T.a,{type:"submit",variant:"contained",color:"primary",className:e.button},"Submit")),a.a.createElement("br",null),a.a.createElement(j.a,{item:!0},a.a.createElement(o.a,{to:"/signup"},"Signup")))))))}}])&&R(n.prototype,i),t}();q.propTypes={classes:u.a.object.isRequired},t.a=Object(i.a)(Object(p.withStyles)(N)(q))},313:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(204),i=n(2),s=n.n(i),l=n(20),c=n(36),u=n.n(c),p=n(74),d=n.n(p),m=n(147),f=n.n(m),h=n(148),y=n.n(h),g=n(52),b=n.n(g),v=n(315),E=n.n(v),S=n(31),w=n.n(S),k=n(314),O=n.n(k),P=n(59),C=n.n(P),j=n(65),_=n.n(j),T=n(86),x=n.n(T),R=n(316),U=n.n(R),D=n(51),M=n.n(D),N=n(27),q=n.n(N);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){return{main:F({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}},H=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=A(t).call(this))||"object"!==I(n)&&"function"!=typeof n?G(this):n).handleSubmit=e.handleSubmit.bind(G(G(e))),e.handleChange=e.handleChange.bind(G(G(e))),e.handleClickShowPassword=e.handleClickShowPassword.bind(G(G(e))),e.state={name:"",password:"",showPassword:!1},e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r.Component),n=t,(o=[{key:"handleChange",value:function(e){this.setState(F({},e.target.name,e.target.value))}},{key:"handleClickShowPassword",value:function(){this.setState(function(e){return{showPassword:!e.showPassword}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={name:this.state.name,password:this.state.password,showPassword:!1};console.log(n),fetch("/users/create",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(){t.props.history.push("/home")})}},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("main",{className:e.main},a.a.createElement(O.a,null),a.a.createElement(M.a,{className:e.paper},a.a.createElement(E.a,{className:e.avatar},a.a.createElement(U.a,null)),a.a.createElement(q.a,{component:"h1",variant:"h5"},"Sign Up"),a.a.createElement("form",{className:e.form,onSubmit:this.handleSubmit},a.a.createElement(C.a,{margin:"normal",required:!0,fullWidth:!0},a.a.createElement(x.a,{htmlFor:"name"},"Username"),a.a.createElement(_.a,{id:"name",name:"name",autoComplete:"name",autoFocus:!0,value:this.state.name,onChange:this.handleChange})),a.a.createElement(C.a,{margin:"normal",required:!0,fullWidth:!0},a.a.createElement(b.a,{type:this.state.showPassword?"text":"password",name:"password",label:"Password",id:"outlined-adornment-password",value:this.state.password,onChange:this.handleChange,InputProps:{endAdornment:a.a.createElement(d.a,{position:"end"},a.a.createElement(u.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.showPassword?a.a.createElement(y.a,null):a.a.createElement(f.a,null)))}})),a.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign in"))))}}])&&B(n.prototype,o),t}();H.propTypes={classes:s.a.object.isRequired},t.a=Object(o.a)(Object(l.withStyles)(W)(H))},317:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(333),i=n(2),s=n.n(i),l=n(20),c=n(318),u=n.n(c),p=n(73),d=n.n(p),m=n(27),f=n.n(m),h=n(31),y=n.n(h),g=n(36),b=n.n(g),v=n(319),E=n.n(v);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var j=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=O(t).call(this))||"object"!==S(n)&&"function"!=typeof n?C(this):n).onLogout=e.onLogout.bind(C(C(e))),e}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r.Component),n=t,(i=[{key:"onLogout",value:function(e){var t=this;e.preventDefault(),fetch("/users/logout",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){console.log("success!"),t.props.setLogin(!1),t.props.setUser(""),t.props.setUsername("")})}},{key:"render",value:function(){console.log(this.props);var e=this.props.classes;return a.a.createElement("div",{className:e.root},a.a.createElement(u.a,{position:"static"},a.a.createElement(d.a,null,a.a.createElement(b.a,{className:e.menuButton,color:"inherit","aria-label":"Menu"},a.a.createElement(E.a,null)),a.a.createElement(f.a,{variant:"h6",color:"inherit",className:e.grow},"Exchange"),a.a.createElement(y.a,{color:"inherit",component:function(e){return a.a.createElement(o.a,w({to:"/home"},e))}},"Home"),!this.props.loggedin&&a.a.createElement(y.a,{color:"inherit",component:function(e){return a.a.createElement(o.a,w({to:"/login"},e))}},"Login"),this.props.loggedin&&a.a.createElement("form",{onSubmit:this.onLogout},a.a.createElement(y.a,{type:"submit",color:"inherit"},"Logout")))))}}])&&k(n.prototype,i),t}();j.propTypes={classes:s.a.object.isRequired},t.a=Object(l.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(j)},332:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(151),i=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:60}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"on"},{lightness:30}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ef8c25"},{lightness:40}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#b6c54c"},{lightness:40},{saturation:-40}]}];function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(n=!(r=c(t).call(this,e))||"object"!==s(r)&&"function"!=typeof r?p(this):r).fetchUser=n.fetchUser.bind(p(p(n))),n.state={lat:1.3521,long:103.8198,place:"",userList:[]},n}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.Component),n=t,(o=[{key:"getGoogleMaps",value:function(){return this.googleMapsPromise||(this.googleMapsPromise=new Promise(function(e){window.resolveGoogleMapsPromise=function(){e(google),delete window.resolveGoogleMapsPromise};var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBPkUDXc8RZJsFsK-lfvjv6m79PHRyaoUI","&libraries=places&callback=resolveGoogleMapsPromise"),t.async=!0,t.defer=!0,document.body.appendChild(t)})),this.googleMapsPromise}},{key:"componentWillMount",value:function(){this.getGoogleMaps(),this.fetchUser()}},{key:"fetchUser",value:function(){var e=this;fetch("api/users").then(function(e){return e.json()}).then(function(t){return e.setState({userList:t},function(){return console.log("result of USERS fetch:",t)})})}},{key:"componentDidMount",value:function(){var e=this;console.log(this.state.userList,"state of userList ~~~~ "),console.log("printing props from maps after maps been mounted",this.props),this.getGoogleMaps().then(function(t){var n=new t.maps.Map(document.getElementById("gmap"),{zoom:12,center:{lat:1.3521,lng:103.8198},styles:i}),r=new t.maps.InfoWindow;function a(e,a){var o="";"B"===e.ordertype&&(o="http://maps.google.com/mapfiles/ms/micons/blue.png");var i=new t.maps.LatLng(e.meet_lat,e.meet_long),s=new t.maps.Marker({position:i,map:n,animation:t.maps.Animation.DROP,icon:o});return t.maps.event.addListener(s,"click",function(){r.setContent("<p>Ticker: "+e.ticker+"</p><p>Order type: "+e.ordertype+"</p><p>quantity: "+e.quantity+"</p><p>Good till: "+e.available_till.split("T")[0]+"<p>Counterparty id: "+e.user_id+"</p><p>Counterparty name: "+a+'</p></p><button id="markerButton" data-foo="'+e.user_id+'" onclick="myFunction(event)">Click to chat with me!</button>'),r.open(n,this),s.setAnimation(t.maps.Animation.BOUNCE),setTimeout(function(){s.setAnimation(null)},2e3)}),s}r=new t.maps.InfoWindow;for(var o=[],s=0;s<e.props.result.length;s++){for(var l="",c=0;c<e.state.userList.length;c++)e.state.userList[c].id===parseInt(e.props.result[s].user_id)&&(l=e.state.userList[c].name);o[s]=a(e.props.result[s],l)}})}},{key:"render",value:function(){return console.log("maps been rendered"),console.log("maps props - see result",this.props),a.a.createElement("div",{style:{width:"100%%",height:500},id:"gmap"})}}])&&l(n.prototype,o),t}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(786);var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,h(t).apply(this,arguments))}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,r.Component),n=t,(o=[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("strong",null,"To: ")," ",this.props.to," ",a.a.createElement("strong",null,"From: ")," ",this.props.fromUser," ",a.a.createElement("strong",null,"Text: "),this.props.message)}}])&&f(n.prototype,o),t}(),b=n(23),v=n.n(b),E=n(2),S=n.n(E),w=n(20),k=n(326),O=n.n(k),P=n(327),C=n.n(P),j=n(329),_=n.n(j),T=n(328),x=n.n(T),R=n(27),U=n.n(R),D=n(330),M=n.n(D),N=n(31),q=n.n(N),I=n(6),B=n.n(I),A=n(52),L=n.n(A);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}function J(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?z(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var K=function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit}}},V=function(e){function t(){var e;return F(this,t),(e=J(this,X(t).call(this))).changeHandler=e.changeHandler.bind(z(z(e))),e}return Q(t,a.a.Component),H(t,[{key:"changeHandler",value:function(){this.props.setSgd(event.target.value)}},{key:"render",value:function(){var e=this.props.classes;return console.log("rendering SGD"),a.a.createElement("div",null,a.a.createElement(L.a,{id:"outlined-number",label:"USD TO SGD",value:Math.round(100*this.props.SGD)/100,onChange:this.changeHandler,type:"number",className:e.textField,InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined"}))}}]),t}();V.propTypes={classes:S.a.object.isRequired},V=Object(w.withStyles)(K)(V);var Z=function(e){function t(){var e;return F(this,t),(e=J(this,X(t).call(this))).changeHandler=e.changeHandler.bind(z(z(e))),e}return Q(t,a.a.Component),H(t,[{key:"changeHandler",value:function(){this.props.setUsd(event.target.value)}},{key:"render",value:function(){var e=this.props.classes;return console.log("rendering USD"),a.a.createElement("div",null,a.a.createElement(L.a,{id:"outlined-number",label:"SGD TO USD",value:Math.round(100*this.props.USD)/100,onChange:this.changeHandler,type:"number",className:e.textField,InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined"}))}}]),t}();Z.propTypes={classes:S.a.object.isRequired},Z=Object(w.withStyles)(K)(Z);var Y=function(e){function t(){var e;return F(this,t),(e=J(this,X(t).call(this))).setSgd=e.setSgd.bind(z(z(e))),e.setUsd=e.setUsd.bind(z(z(e))),e.state={USDSGD:"",SGD:"",USD:"",styles:{textDecorationLine:"underline"}},e}return Q(t,r.Component),H(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=USD&to_currency=SGD&apikey=".concat("V9CIRQRJSAFI99RM")).then(function(e){return e.json()}).then(function(t){console.log("api result of alphavantage:",t),e.setState({USDSGD:t["Realtime Currency Exchange Rate"]["5. Exchange Rate"]})})}},{key:"setSgd",value:function(e){this.setState({SGD:e,USD:e*parseFloat(this.state.USDSGD)})}},{key:"setUsd",value:function(e){this.setState({USD:e,SGD:e/parseFloat(this.state.USDSGD)})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h2",null,"USDSGD FX: ",a.a.createElement("strong",{style:this.state.styles},this.state.USDSGD.substring(0,5))),a.a.createElement(V,{setSgd:this.setSgd,SGD:this.state.SGD}),a.a.createElement(Z,{setUsd:this.setUsd,USD:this.state.USD}))}}]),t}(),$=Object(w.withStyles)(K)(Y);function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var oe=function(e){return{root:{flexGrow:1,marginTop:10},card:{width:400,height:345,overflow:"auto",marginTop:0},button:{margin:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit}}},ie=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=ne(t).call(this))||"object"!==ee(n)&&"function"!=typeof n?ae(this):n).state={myUser:null,receiver:null,messages:[],input:"",styles:{borderRadius:5,paddingTop:10,paddingBottom:10,position:"relative",left:8,top:2}},e.handleClick=e.handleClick.bind(ae(ae(e))),e.setMsg=e.setMsg.bind(ae(ae(e))),e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(t,r.Component),n=t,(o=[{key:"componentDidUpdate",value:function(e){this.props.messages!=e.messages&&(this.setState({myUser:this.props.user,receiver:this.props.idMarker,messages:this.props.messages}),console.log("is state updated in update? ~~~~~~~~~~~",this.state))}},{key:"componentDidMount",value:function(){this.setState({myUser:this.props.user,receiver:this.props.idMarker,messages:this.props.messages}),console.log(this.state,"states of chatroom ~~~~~~~~"),console.log(this.props,"passing props to chatroom ~~~~~")}},{key:"setMsg",value:function(e){this.setState({input:e.target.value})}},{key:"handleClick",value:function(e){e.preventDefault();var t={message:!0,to:this.props.idMarker,from:this.props.user,fromUser:this.props.username,content:this.state.input};console.log("data from input field ~~~ ",t),this.props.handleMessage(t),this.setState({input:""})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.messages.map(function(t,n){if(e.props.user===t.to||e.props.user===t.from)return a.a.createElement(U.a,{component:"p"},a.a.createElement(g,{message:t.content,to:t.to,from:t.from,fromUser:t.fromUser}))}),r="Chat to User no."+this.props.idMarker;return a.a.createElement(v.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},a.a.createElement(v.a,{item:!0},a.a.createElement(O.a,{className:t.card},a.a.createElement(C.a,null,a.a.createElement(x.a,null,a.a.createElement(U.a,{gutterBottom:!0,variant:"h6",component:"h2"},"Chatroom"),n)),a.a.createElement(_.a,null,a.a.createElement("form",{onSubmit:this.handleClick},a.a.createElement("input",{style:this.state.styles,value:this.state.input,onChange:this.setMsg,placeholder:r}),a.a.createElement(q.a,{type:"submit",variant:"contained",color:"primary",className:t.button},"Send",a.a.createElement(M.a,{className:t.rightIcon},"send")))))),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(v.a,{item:!0},a.a.createElement($,null)))}}])&&te(n.prototype,o),t}();ie.propTypes={classes:S.a.object.isRequired};var se=Object(w.withStyles)(oe)(ie),le=n(114),ce=n.n(le),ue=n(115),pe=n.n(ue),de=n(22),me=n.n(de),fe=n(110),he=n.n(fe),ye=n(116),ge=n.n(ye),be=n(66),ve=n.n(be),Ee=n(111),Se=n.n(Ee),we=n(73),ke=n.n(we),Oe=n(51),Pe=n.n(Oe),Ce=n(87),je=n.n(Ce),_e=n(36),Te=n.n(_e),xe=n(67),Re=n.n(xe),Ue=n(112),De=n.n(Ue),Me=n(113),Ne=n.n(Me),qe=n(64);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),e}function Ge(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?He(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xe(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}var Qe=[{id:"ticker",numeric:!1,disablePadding:!0,label:"Ticker"},{id:"ordertype",numeric:!1,disablePadding:!1,label:"Buy/Sell"},{id:"quantity",numeric:!0,disablePadding:!1,label:"Quantity"},{id:"orderstatus",numeric:!1,disablePadding:!1,label:"Status"},{id:"action",numeric:!1,disablePadding:!1,label:"Action(s)"}],ze=function(e){function t(){var e,n;Be(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return Je(He(He(n=Ge(this,(e=Fe(t)).call.apply(e,[this].concat(a))))),"createSortHandler",function(e){return function(t){n.props.onRequestSort(t,e)}}),n}return We(t,a.a.Component),Le(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onSelectAllClick,r=t.order,o=t.orderBy,i=t.numSelected,s=t.rowCount;return a.a.createElement(he.a,null,a.a.createElement(ve.a,null,a.a.createElement(me.a,{padding:"checkbox"},a.a.createElement(je.a,{indeterminate:i>0&&i<s,checked:i===s,onChange:n})),Qe.map(function(t){return a.a.createElement(me.a,{key:t.id,numeric:t.numeric,padding:t.disablePadding?"none":"default",sortDirection:o===t.id&&r},a.a.createElement(Re.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},a.a.createElement(Se.a,{active:o===t.id,direction:r,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}();ze.propTypes={numSelected:S.a.number.isRequired,onRequestSort:S.a.func.isRequired,onSelectAllClick:S.a.func.isRequired,order:S.a.string.isRequired,orderBy:S.a.string.isRequired,rowCount:S.a.number.isRequired};var Ke=function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(qe.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}},Ve=function(e){var t=e.numSelected,n=e.classes;return a.a.createElement(ke.a,{className:B()(n.root,Je({},n.highlight,t>0))},a.a.createElement("div",{className:n.title},t>0?a.a.createElement(U.a,{color:"inherit",variant:"subtitle1"},t," selected"):a.a.createElement(U.a,{variant:"h6",id:"tableTitle"},"Orders")),a.a.createElement("div",{className:n.spacer}),a.a.createElement("div",{className:n.actions},t>0?a.a.createElement(Re.a,{title:"Delete"},a.a.createElement(Te.a,{"aria-label":"Delete"},a.a.createElement(De.a,null))):a.a.createElement(Re.a,{title:"Filter list"},a.a.createElement(Te.a,{"aria-label":"Filter list"},a.a.createElement(Ne.a,null)))))};Ve.propTypes={classes:S.a.object.isRequired,numSelected:S.a.number.isRequired},Ve=Object(w.withStyles)(Ke)(Ve);var Ze=function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}},Ye=function(e){function t(){var e;return Be(this,t),Je(He(He(e=Ge(this,Fe(t).call(this)))),"handleRequestSort",function(t,n){var r=n,a="desc";e.state.orderBy===n&&"desc"===e.state.order&&(a="asc"),e.setState({order:a,orderBy:r})}),Je(He(He(e)),"handleSelectAllClick",function(t){t.target.checked?e.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):e.setState({selected:[]})}),Je(He(He(e)),"handleClick",function(t,n){var r=e.state.selected,a=r.indexOf(n),o=[];-1===a?o=o.concat(r,n):0===a?o=o.concat(r.slice(1)):a===r.length-1?o=o.concat(r.slice(0,-1)):a>0&&(o=o.concat(r.slice(0,a),r.slice(a+1))),e.setState({selected:o})}),Je(He(He(e)),"handleChangePage",function(t,n){e.setState({page:n})}),Je(He(He(e)),"handleChangeRowsPerPage",function(t){e.setState({rowsPerPage:t.target.value})}),Je(He(He(e)),"isSelected",function(t){return-1!==e.state.selected.indexOf(t)}),e.state={order:"asc",orderBy:"ticker",selected:[],data:[],page:0,rowsPerPage:5},e}return We(t,a.a.Component),Le(t,[{key:"componentWillMount",value:function(){this.setState({data:this.props.result}),console.log("this the state of enhanced table ~~~~~~~~ ",this.state),console.log("this the props of enhanced table ~~~~~~~~ ",this.props)}},{key:"render",value:function(){var e,t,n,r=this,o=this.props.classes,i=this.state,s=i.data,l=i.order,c=i.orderBy,u=i.selected,p=i.rowsPerPage,d=i.page,m=p-Math.min(p,s.length-d*p),f=this.props.result.filter(function(e){return"active"===e.orderstatus&&e.user_id!=r.props.user});return a.a.createElement(Pe.a,{className:o.root},a.a.createElement(Ve,{numSelected:u.length}),a.a.createElement("div",{className:o.tableWrapper},a.a.createElement(ce.a,{className:o.table,"aria-labelledby":"tableTitle"},a.a.createElement(ze,{numSelected:u.length,order:l,orderBy:c,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:s.length}),a.a.createElement(pe.a,null,(e=f,t=function(e,t){return"desc"===l?function(e,n){return Xe(e,n,t)}:function(e,n){return-Xe(e,n,t)}}(0,c),n=e.map(function(e,t){return[e,t]}),n.sort(function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]}),n.map(function(e){return e[0]})).slice(d*p,d*p+p).map(function(e){var t=r.isSelected(e.id);return a.a.createElement(ve.a,{hover:!0,onClick:function(t){return r.handleClick(t,e.id)},role:"checkbox","aria-checked":t,tabIndex:-1,key:e.id,selected:t},a.a.createElement(me.a,{padding:"checkbox"},a.a.createElement(je.a,{checked:t})),a.a.createElement(me.a,{component:"th",scope:"row",padding:"none"},e.ticker),a.a.createElement(me.a,null,e.ordertype),a.a.createElement(me.a,{numeric:!0},e.quantity),a.a.createElement(me.a,null,e.orderstatus),e.user_id!==r.props.user?"B"===e.ordertype?a.a.createElement(me.a,null,"Sell --\x3e"):a.a.createElement(me.a,null,"Buy --\x3e"):a.a.createElement(me.a,null,"No action"))}),m>0&&a.a.createElement(ve.a,{style:{height:49*m}},a.a.createElement(me.a,{colSpan:6}))))),a.a.createElement(ge.a,{rowsPerPageOptions:[5,10,25],component:"div",count:s.length,rowsPerPage:p,page:d,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}();function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),e}function rt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?it(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function it(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}Ye.propTypes={classes:S.a.object.isRequired},Object(w.withStyles)(Ze)(Ye);var ct=[{id:"ticker",numeric:!1,disablePadding:!0,label:"Ticker"},{id:"ordertype",numeric:!1,disablePadding:!1,label:"Buy/Sell"},{id:"quantity",numeric:!0,disablePadding:!1,label:"Quantity"},{id:"orderstatus",numeric:!1,disablePadding:!1,label:"Status"}],ut=function(e){function t(){var e,n;et(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return st(it(it(n=rt(this,(e=at(t)).call.apply(e,[this].concat(a))))),"createSortHandler",function(e){return function(t){n.props.onRequestSort(t,e)}}),n}return ot(t,a.a.Component),nt(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onSelectAllClick,r=t.order,o=t.orderBy,i=t.numSelected,s=t.rowCount;return a.a.createElement(he.a,null,a.a.createElement(ve.a,null,a.a.createElement(me.a,{padding:"checkbox"},a.a.createElement(je.a,{indeterminate:i>0&&i<s,checked:i===s,onChange:n})),ct.map(function(t){return a.a.createElement(me.a,{key:t.id,numeric:t.numeric,padding:t.disablePadding?"none":"default",sortDirection:o===t.id&&r},a.a.createElement(Re.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},a.a.createElement(Se.a,{active:o===t.id,direction:r,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}();ut.propTypes={numSelected:S.a.number.isRequired,onRequestSort:S.a.func.isRequired,onSelectAllClick:S.a.func.isRequired,order:S.a.string.isRequired,orderBy:S.a.string.isRequired,rowCount:S.a.number.isRequired};var pt=function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(qe.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}},dt=function(e){function t(){var e;return et(this,t),(e=rt(this,at(t).call(this))).handleDelete=e.handleDelete.bind(it(it(e))),e}return ot(t,r.Component),nt(t,[{key:"handleDelete",value:function(){for(var e=this,t=0;t<this.props.selected.length;t++)fetch("/order/".concat(this.props.selected[t],"/cancel"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){console.log("success in cancelling order!!!!"),e.props.updateOrder()})}},{key:"render",value:function(){var e=this.props,t=e.numSelected,n=e.classes;return console.log(this.props,"listening to props from table toolbar ~~~~~~"),a.a.createElement(ke.a,{className:B()(n.root,st({},n.highlight,t>0))},a.a.createElement("div",{className:n.title},t>0?a.a.createElement(U.a,{color:"inherit",variant:"subtitle1"},t," selected"):a.a.createElement(U.a,{variant:"h6",id:"tableTitle"},"My Orders")),a.a.createElement("div",{className:n.spacer}),a.a.createElement("div",{className:n.actions},t>0?a.a.createElement(Re.a,{title:"Delete"},a.a.createElement(Te.a,{onClick:this.handleDelete,"aria-label":"Delete"},a.a.createElement(De.a,null))):a.a.createElement(Re.a,{title:"Filter list"},a.a.createElement(Te.a,{"aria-label":"Filter list"},a.a.createElement(Ne.a,null)))))}}]),t}();dt.propTypes={classes:S.a.object.isRequired,numSelected:S.a.number.isRequired},dt=Object(w.withStyles)(pt)(dt);var mt=function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}},ft=function(e){function t(){var e;return et(this,t),st(it(it(e=rt(this,at(t).call(this)))),"handleRequestSort",function(t,n){var r=n,a="desc";e.state.orderBy===n&&"desc"===e.state.order&&(a="asc"),e.setState({order:a,orderBy:r})}),st(it(it(e)),"handleSelectAllClick",function(t){t.target.checked?e.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):e.setState({selected:[]})}),st(it(it(e)),"handleClick",function(t,n){var r=e.state.selected,a=r.indexOf(n),o=[];-1===a?o=o.concat(r,n):0===a?o=o.concat(r.slice(1)):a===r.length-1?o=o.concat(r.slice(0,-1)):a>0&&(o=o.concat(r.slice(0,a),r.slice(a+1))),e.setState({selected:o})}),st(it(it(e)),"handleChangePage",function(t,n){e.setState({page:n})}),st(it(it(e)),"handleChangeRowsPerPage",function(t){e.setState({rowsPerPage:t.target.value})}),st(it(it(e)),"isSelected",function(t){return-1!==e.state.selected.indexOf(t)}),e.state={order:"asc",orderBy:"ticker",selected:[],data:[],page:0,rowsPerPage:5},e}return ot(t,a.a.Component),nt(t,[{key:"componentWillMount",value:function(){this.setState({data:this.props.result}),console.log("this the state of enhanced table ~~~~~~~~ ",this.state),console.log("this the props of enhanced table ~~~~~~~~ ",this.props)}},{key:"componentDidUpdate",value:function(e){this.props.result!=e.result&&(console.log("updating props for myorders ~~~~~~~",this.props),this.setState({data:this.props.result}))}},{key:"render",value:function(){var e,t,n,r=this,o=this.props.classes,i=this.state,s=i.data,l=i.order,c=i.orderBy,u=i.selected,p=i.rowsPerPage,d=i.page,m=p-Math.min(p,s.length-d*p),f=s.filter(function(e){return e.user_id===r.props.user});return a.a.createElement(Pe.a,{className:o.root},a.a.createElement(dt,{numSelected:u.length,selected:this.state.selected,updateOrder:this.props.updateOrder}),a.a.createElement("div",{className:o.tableWrapper},a.a.createElement(ce.a,{className:o.table,"aria-labelledby":"tableTitle"},a.a.createElement(ut,{numSelected:u.length,order:l,orderBy:c,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:s.length}),a.a.createElement(pe.a,null,(e=f,t=function(e,t){return"desc"===l?function(e,n){return lt(e,n,t)}:function(e,n){return-lt(e,n,t)}}(0,c),n=e.map(function(e,t){return[e,t]}),n.sort(function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]}),n.map(function(e){return e[0]})).slice(d*p,d*p+p).map(function(e){var t=r.isSelected(e.id);return a.a.createElement(ve.a,{hover:!0,onClick:function(t){return r.handleClick(t,e.id)},role:"checkbox","aria-checked":t,tabIndex:-1,key:e.id,selected:t},a.a.createElement(me.a,{padding:"checkbox"},a.a.createElement(je.a,{checked:t})),a.a.createElement(me.a,{component:"th",scope:"row",padding:"none"},e.ticker),a.a.createElement(me.a,null,e.ordertype),a.a.createElement(me.a,{numeric:!0},e.quantity),a.a.createElement(me.a,null,e.orderstatus))}),m>0&&a.a.createElement(ve.a,{style:{height:49*m}},a.a.createElement(me.a,{colSpan:5}))))),a.a.createElement(ge.a,{rowsPerPageOptions:[5,10,25],component:"div",count:s.length,rowsPerPage:p,page:d,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}();ft.propTypes={classes:S.a.object.isRequired};var ht=Object(w.withStyles)(mt)(ft),yt=n(203),gt=n.n(yt),bt=n(331),vt=n.n(bt);function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jt=function(e){return{button:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit},root:{flexGrow:1}}},_t=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,r=kt(t).call(this,e),Ct(Pt(Pt(n=!r||"object"!==Et(r)&&"function"!=typeof r?Pt(this):r)),"handleClickOpen",function(e){return function(){n.setState({displayadd:!0,scroll:e})}}),Ct(Pt(Pt(n)),"handleClickClose",function(){console.log("checking if display add order is closed ~~~~~~~~~~~~~~~~~~~"),n.setState({displayadd:!1})}),n.updateOrder=n.updateOrder.bind(Pt(Pt(n))),n.handleClickDisplay=n.handleClickDisplay.bind(Pt(Pt(n))),n.handleMessage=n.handleMessage.bind(Pt(Pt(n))),n.handleClickClose=n.handleClickClose.bind(Pt(Pt(n))),n.state={result:[],displayadd:!1,scroll:"paper",displaychat:!1,messages:[]},n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(t,r.Component),n=t,(i=[{key:"setMsgs",value:function(e){this.setState({messages:St(this.state.messages).concat([e])})}},{key:"handleChat",value:function(e){this.setState({displaychat:e})}},{key:"updateOrder",value:function(){var e=this;fetch("api/orders").then(function(e){return e.json()}).then(function(t){return e.setState({result:t},function(){return console.log("result of fetch:",t)})})}},{key:"readCookie",value:function(e){for(var t={},n=e.split(";"),r=0;r<n.length;r++){var a=n[r].split("=");t[a[0]]=a[1]}return t}},{key:"componentDidMount",value:function(){var e=this;this.updateOrder();var t=this.readCookie(document.cookie);t.logged_in&&(this.props.setLogin(!0),this.props.setUser(parseInt(t[" user_id"])),this.props.setUsername(t[" username"])),socket=openSocket("https://sheltered-badlands-12857.herokuapp.com/"),socket.on("added order",function(t){!0===t.addOrder?(console.log("testing if orders live updating works ~~~~~~~"),fetch("api/orders").then(function(e){return e.json()}).then(function(t){return e.setState({result:t},function(){return console.log("result of fetch:",t)})})):!0===t.message?(console.log("display the messages from chat pls ~~~~~~~"),e.setState({messages:St(e.state.messages).concat([t])})):console.log("nothing here to see ~~~~~")})}},{key:"handleMessage",value:function(e){socket=openSocket("https://sheltered-badlands-12857.herokuapp.com/"),socket.emit("added order",e)}},{key:"handleClickDisplay",value:function(e){this.setState({displayadd:e})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=[];return this.state.result.filter(function(t){return"active"===t.orderstatus&&t.user_id!=e.props.user}).map(function(e,t){var r=[];r.push(e.ticker),r.push(e.ordertype),r.push(e.quantity),r.push(e.orderstatus),"B"===e.ordertype?r.push("Sell --\x3e"):"S"===e.ordertype&&r.push("Buy --\x3e"),n.push(r)}),a.a.createElement("div",{className:t.root},a.a.createElement(v.a,{container:!0,spacing:32},this.state.result.length>0&&a.a.createElement(v.a,{item:!0,xs:12},a.a.createElement(d,{result:this.state.result})),this.state.displayadd&&a.a.createElement(o.a,{user:this.props.user,displayClose:this.handleClickClose,update:this.updateOrder,displayadd:this.state.displayadd}),this.state.result.length>0&&a.a.createElement(v.a,{item:!0,xs:12,sm:8},a.a.createElement(vt.a,{title:"All Orders",data:n,columns:["ticker","Buy/Sell","quantity","orderstatus","action"],options:{filterType:"checkbox"}}),a.a.createElement(ht,{user:this.props.user,result:this.state.result,updateOrder:this.updateOrder})),a.a.createElement(v.a,{item:!0,xs:12,sm:4},a.a.createElement(v.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center"},a.a.createElement(v.a,{item:!0},a.a.createElement("div",null,this.props.loggedin&&a.a.createElement(q.a,{variant:"extendedFab","aria-label":"Delete",className:t.button,onClick:this.handleClickOpen(this.state.scroll)},a.a.createElement(gt.a,{className:t.extendedIcon}),"Add order"))),a.a.createElement(v.a,{item:!0},a.a.createElement("div",null,this.props.loggedin&&a.a.createElement(q.a,{variant:"extendedFab","aria-label":"Delete",className:t.button,onClick:function(){return e.handleChat(!e.state.displaychat)}},a.a.createElement(gt.a,{className:t.extendedIcon}),"Display Chatroom")))),a.a.createElement("br",null),a.a.createElement("br",null),this.state.displaychat?a.a.createElement(se,{username:this.props.username,user:this.props.user,idMarker:this.props.idMarker,messages:this.state.messages,setMsgs:this.state.setMsgs,handleMessage:this.handleMessage}):a.a.createElement(v.a,{container:!0,direction:"column",justify:"space-evenly",alignItems:"center"},a.a.createElement(v.a,{item:!0},a.a.createElement($,null))))))}}])&&wt(n.prototype,i),t}();_t.propTypes={classes:S.a.object.isRequired},t.a=Object(w.withStyles)(jt)(_t)},334:function(e,t,n){e.exports=n(335)},335:function(e,t,n){"use strict";n.r(t),n(336),n(538),n(876);var r=n(0),a=n.n(r),o=n(35),i=n.n(o),s=n(307);n(881),i.a.render(a.a.createElement(s.a,null),document.getElementById("app"))},813:function(e,t){},881:function(e,t){e.exports={"pac-container":"style_pac-container_11e13"}}});