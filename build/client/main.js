!function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],p=0,m=[];p<s.length;p++)i=s[p],a[i]&&m.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={0:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([341,1]),n()}({156:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(209),i=n(6),s=n.n(i),l=n(2),c=n.n(l),u=n(19),p=n(207),m=n.n(p),f=n(324),d=n.n(f),h=n(158),y=n.n(h),g=n(60),b=n.n(g),v=n(206),E=n.n(v),S=n(52),w=n.n(S),k=n(74),O=n.n(k),P=n(29),C=n.n(P),j=n(157),_=n.n(j),T=n(325),x=n.n(T),R=n(322),M=n.n(R),U=n(323),D=n.n(U),N=n(321),B=n.n(N);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var G=function(e){return{formControl:{margin:e.spacing.unit},group:{margin:e.spacing.unit},root:{display:"flex"},textField:{flexBasis:200}}},W=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=A(t).call(this))||"object"!==I(n)&&"function"!=typeof n?F(this):n).handleChange=e.handleChange.bind(F(F(e))),e.handleSubmit=e.handleSubmit.bind(F(F(e))),e.state={ticker:"",ordertype:"B",quantity:null,orderstatus:"active",meet_address:"",meet_lat:0,meet_long:0,available_till:"",user_id:""},e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r.Component),n=t,(o=[{key:"getGoogleMaps",value:function(){return this.googleMapsPromise||(this.googleMapsPromise=new Promise(function(e){window.resolveGoogleMapsPromise=function(){e(google),delete window.resolveGoogleMapsPromise};var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBPkUDXc8RZJsFsK-lfvjv6m79PHRyaoUI","&libraries=places&callback=resolveGoogleMapsPromise"),t.async=!0,t.defer=!0,document.body.appendChild(t)})),this.googleMapsPromise}},{key:"componentWillMount",value:function(){this.getGoogleMaps()}},{key:"componentDidMount",value:function(){var e=this;this.forceUpdate();var t=parseInt(this.props.user);this.setState({user_id:t}),this.getGoogleMaps().then(function(t){var n=new t.maps.Map(document.getElementById("smap"),{zoom:10,center:{lat:1.3521,lng:103.8198}}),r=document.getElementById("searchTextField"),a=new t.maps.places.Autocomplete(r,{componentRestrictions:{country:"sg"}});a.addListener("place_changed",function(){var r=a.getPlace(),o=r.geometry.location.lat(),i=r.geometry.location.lng();e.setState({meet_lat:o,meet_long:i,meet_address:r.formatted_address}),document.getElementById("lat").value=o,document.getElementById("long").value=i;var s={lat:parseFloat(o),lng:parseFloat(i)};new t.maps.Marker({position:s,map:n})})})}},{key:"handleChange",value:function(e){var t,n,r;this.setState((t={},n=e.target.name,r=e.target.value,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={ticker:"USDSGD",ordertype:this.state.ordertype,quantity:this.state.quantity,orderstatus:this.state.orderstatus,meet_address:this.state.meet_address,meet_lat:this.state.meet_lat,meet_long:this.state.meet_long,available_till:this.state.available_till,user_id:this.state.user_id};fetch("/order/new",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(){console.log("this is a success!!"),t.props.displayClose(),t.props.update()})}},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",null,a.a.createElement(_.a,{open:this.props.displayadd,onClose:this.props.displayClose,scroll:"paper","aria-labelledby":"scroll-dialog-title"},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement(B.a,{id:"scroll-dialog-title"},"Enter Order"),a.a.createElement(M.a,null,a.a.createElement(D.a,null,"Disclaimers: enter order that would be shown to other users on the map and would allow them to click on the map marker to chat to you"),a.a.createElement("br",null),a.a.createElement(w.a,{disabled:!0,id:"outlined-adornment-amount",className:s()(e.margin,e.textField),variant:"outlined",label:"Ticker",name:"ticker",onChange:this.handleChange,value:"USDSGD",InputProps:{startAdornment:a.a.createElement(O.a,{position:"start"},"T")},fullWidth:!0}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(w.a,{id:"outlined-adornment-amount",className:s()(e.margin,e.textField),variant:"outlined",label:"Quantity",name:"quantity",value:this.state.quantity,onChange:this.handleChange,InputProps:{startAdornment:a.a.createElement(O.a,{position:"start"},"Q")},fullWidth:!0}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(w.a,{id:"searchTextField",className:s()(e.margin,e.textField),variant:"outlined",label:"Meet_address",name:"meet_address",onChange:this.handleChange,InputProps:{startAdornment:a.a.createElement(O.a,{position:"start"},"@")},fullWidth:!0}),a.a.createElement("br",null),a.a.createElement("input",{id:"lat",type:"hidden"}),a.a.createElement("input",{id:"long",type:"hidden"}),a.a.createElement("br",null),a.a.createElement("form",{className:e.container,noValidate:!0},a.a.createElement(w.a,{id:"date",label:"Available till",type:"date",name:"available_till",value:this.state.available_till,onChange:this.handleChange,className:e.textField,InputLabelProps:{shrink:!0}})),a.a.createElement("br",null),a.a.createElement(b.a,{component:"fieldset",className:e.formControl},a.a.createElement(E.a,{component:"legend"},"Buy/Sell"),a.a.createElement(d.a,{"aria-label":"Ordertype",name:"ordertype",className:e.group,value:this.state.ordertype,onChange:this.handleChange},a.a.createElement(y.a,{value:"B",control:a.a.createElement(m.a,null),label:"Buy"}),a.a.createElement(y.a,{value:"S",control:a.a.createElement(m.a,null),label:"Sell"}))),a.a.createElement("div",{style:{width:"100%%",height:200},id:"smap"})),a.a.createElement(x.a,null,a.a.createElement(C.a,{type:"submit",color:"primary"},"Confirm Order"),a.a.createElement(C.a,{onClick:this.props.displayClose,color:"primary"},"Cancel")))))}}])&&q(n.prototype,o),t}();W.propTypes={classes:c.a.object.isRequired},t.a=Object(o.a)(Object(u.withStyles)(G)(W))},309:function(e,t,n){"use strict";(function(e){var r=n(0),a=n.n(r),o=n(310),i=n(873),s=n(874),l=n(101),c=n(311),u=n(315),p=n(319),m=n(339),f=n(156);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var v=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,e=!(n=y(t).call(this))||"object"!==d(n)&&"function"!=typeof n?b(this):n,myFunction=e.useridMarker.bind(b(b(e))),e.setLogin=e.setLogin.bind(b(b(e))),e.setUser=e.setUser.bind(b(b(e))),e.setUsername=e.setUsername.bind(b(b(e))),e.state={loggedIn:!1,user:"",username:"",idMarker:null},e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r.Component),n=t,(o=[{key:"useridMarker",value:function(e){this.setState({idMarker:parseInt(e.target.dataset.foo)}),console.log("user marker u clicking ~~~~",e.target.dataset.foo)}},{key:"setLogin",value:function(e){this.setState({loggedIn:e})}},{key:"setUser",value:function(e){this.setState({user:e})}},{key:"setUsername",value:function(e){this.setState({username:e})}},{key:"render",value:function(){var e=this;return a.a.createElement(i.a,null,a.a.createElement("div",null,a.a.createElement(p.a,{loggedin:this.state.loggedIn,user:this.state.user,username:this.state.username,setLogin:this.setLogin,setUser:this.setUser,setUsername:this.setUsername}),a.a.createElement(s.a,null,a.a.createElement(l.a,{path:"/home",render:function(){return a.a.createElement(m.a,{loggedin:e.state.loggedIn,user:e.state.user,username:e.state.username,idMarker:e.state.idMarker,setLogin:e.setLogin,setUser:e.setUser,setUsername:e.setUsername})}}),a.a.createElement(l.a,{path:"/login",render:function(){return a.a.createElement(c.a,{loggedin:e.state.loggedIn,user:e.state.user,username:e.state.username,setLogin:e.setLogin,setUser:e.setUser,setUsername:e.setUsername})}}),a.a.createElement(l.a,{path:"/signup",render:function(){return a.a.createElement(u.a,{loggedin:e.state.loggedIn,user:e.state.user,username:e.state.username})}}),a.a.createElement(l.a,{path:"/neworder",render:function(){return a.a.createElement(f.a,{loggedin:e.state.loggedIn,user:e.state.user,username:e.state.username})}}))))}}])&&h(n.prototype,o),t}();t.a=Object(o.hot)(e)(v)}).call(this,n(256)(e))},311:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(160),i=n(209),s=n(6),l=n.n(s),c=n(2),u=n.n(c),p=n(19),m=n(32),f=n.n(m),d=n(67),h=n.n(d),y=n(86),g=n.n(y),b=n(74),v=n.n(b),E=n(60),S=n.n(E),w=n(151),k=n.n(w),O=n(152),P=n.n(O),C=n(24),j=n.n(C),_=n(29),T=n.n(_);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var N=function(e){return{root:{flexGrow:1},margin:{margin:e.spacing.unit},withoutLabel:{marginTop:3*e.spacing.unit},textField:{flexBasis:200},button:{margin:e.spacing.unit}}},B=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=M(t).call(this))||"object"!==x(n)&&"function"!=typeof n?D(this):n).handleSubmit=e.handleSubmit.bind(D(D(e))),e.handleChange=e.handleChange.bind(D(D(e))),e.handleClickShowPassword=e.handleClickShowPassword.bind(D(D(e))),e.state={name:"",password:"",username:"",showPassword:!1},e}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,r.Component),n=t,(i=[{key:"readCookie",value:function(e){for(var t={},n=e.split(";"),r=0;r<n.length;r++){var a=n[r].split("=");t[a[0]]=a[1]}return t}},{key:"handleChange",value:function(e){var t,n,r;this.setState((t={},n=e.target.name,r=e.target.value,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t))}},{key:"handleClickShowPassword",value:function(){this.setState(function(e){return{showPassword:!e.showPassword}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={name:this.state.name,password:this.state.password};console.log(n),fetch("/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(){console.log(t.readCookie(document.cookie));var e=t.readCookie(document.cookie);e.logged_in&&(t.props.setLogin(!0),t.props.setUser(parseInt(e[" user_id"])),t.props.setUsername(e[" username"]),t.props.history.push("/home"))})}},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",{className:e.root},a.a.createElement("form",{onSubmit:this.handleSubmit},a.a.createElement(j.a,{container:!0,spacing:24},a.a.createElement(j.a,{item:!0,xs:12},a.a.createElement(j.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},a.a.createElement(j.a,{item:!0},a.a.createElement(S.a,{className:l()(e.margin,e.textField)},a.a.createElement(g.a,{htmlFor:"adornment-name"},"Username"),a.a.createElement(h.a,{id:"adornment-name",name:"name",inputProps:{"aria-label":"Name"},onChange:this.handleChange}))),a.a.createElement(j.a,{item:!0},a.a.createElement(S.a,{className:l()(e.margin,e.textField)},a.a.createElement(g.a,{htmlFor:"adornment-password"},"Password"),a.a.createElement(h.a,{id:"adornment-password",type:this.state.showPassword?"text":"password",name:"password",onChange:this.handleChange,endAdornment:a.a.createElement(v.a,{position:"end"},a.a.createElement(f.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.showPassword?a.a.createElement(k.a,null):a.a.createElement(P.a,null)))}))),a.a.createElement("br",null),a.a.createElement(j.a,{item:!0},a.a.createElement(T.a,{type:"submit",variant:"contained",color:"primary",className:e.button},"Submit")),a.a.createElement("br",null),a.a.createElement(j.a,{item:!0},a.a.createElement(o.a,{to:"/signup"},"Signup")))))))}}])&&R(n.prototype,i),t}();B.propTypes={classes:u.a.object.isRequired},t.a=Object(i.a)(Object(p.withStyles)(N)(B))},315:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(209),i=n(2),s=n.n(i),l=n(19),c=n(32),u=n.n(c),p=n(74),m=n.n(p),f=n(151),d=n.n(f),h=n(152),y=n.n(h),g=n(52),b=n.n(g),v=n(317),E=n.n(v),S=n(29),w=n.n(S),k=n(316),O=n.n(k),P=n(60),C=n.n(P),j=n(67),_=n.n(j),T=n(86),x=n.n(T),R=n(318),M=n.n(R),U=n(46),D=n.n(U),N=n(22),B=n.n(N);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){return{main:G({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}}},H=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=A(t).call(this))||"object"!==I(n)&&"function"!=typeof n?F(this):n).handleSubmit=e.handleSubmit.bind(F(F(e))),e.handleChange=e.handleChange.bind(F(F(e))),e.handleClickShowPassword=e.handleClickShowPassword.bind(F(F(e))),e.state={name:"",password:"",showPassword:!1},e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r.Component),n=t,(o=[{key:"handleChange",value:function(e){this.setState(G({},e.target.name,e.target.value))}},{key:"handleClickShowPassword",value:function(){this.setState(function(e){return{showPassword:!e.showPassword}})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n={name:this.state.name,password:this.state.password,showPassword:!1};console.log(n),fetch("/users/create",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(){t.props.history.push("/home")})}},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("main",{className:e.main},a.a.createElement(O.a,null),a.a.createElement(D.a,{className:e.paper},a.a.createElement(E.a,{className:e.avatar},a.a.createElement(M.a,null)),a.a.createElement(B.a,{component:"h1",variant:"h5"},"Sign Up"),a.a.createElement("form",{className:e.form,onSubmit:this.handleSubmit},a.a.createElement(C.a,{margin:"normal",required:!0,fullWidth:!0},a.a.createElement(x.a,{htmlFor:"name"},"Username"),a.a.createElement(_.a,{id:"name",name:"name",autoComplete:"name",autoFocus:!0,value:this.state.name,onChange:this.handleChange})),a.a.createElement(C.a,{margin:"normal",required:!0,fullWidth:!0},a.a.createElement(b.a,{type:this.state.showPassword?"text":"password",name:"password",label:"Password",id:"outlined-adornment-password",value:this.state.password,onChange:this.handleChange,InputProps:{endAdornment:a.a.createElement(m.a,{position:"end"},a.a.createElement(u.a,{"aria-label":"Toggle password visibility",onClick:this.handleClickShowPassword},this.state.showPassword?a.a.createElement(y.a,null):a.a.createElement(d.a,null)))}})),a.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign in"))))}}])&&q(n.prototype,o),t}();H.propTypes={classes:s.a.object.isRequired},t.a=Object(o.a)(Object(l.withStyles)(W)(H))},319:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(340),i=n(2),s=n.n(i),l=n(19),c=n(155),u=n.n(c),p=n(59),m=n.n(p),f=n(22),d=n.n(f),h=n(29),y=n.n(h),g=n(32),b=n.n(g),v=n(320),E=n.n(v);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var j=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=O(t).call(this))||"object"!==S(n)&&"function"!=typeof n?C(this):n).onLogout=e.onLogout.bind(C(C(e))),e}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r.Component),n=t,(i=[{key:"onLogout",value:function(e){var t=this;e.preventDefault(),fetch("/users/logout",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){console.log("success!"),t.props.setLogin(!1),t.props.setUser(""),t.props.setUsername(""),localStorage.clear()})}},{key:"render",value:function(){console.log(this.props);var e=this.props.classes;return a.a.createElement("div",{className:e.root},a.a.createElement(u.a,{position:"static"},a.a.createElement(m.a,null,a.a.createElement(b.a,{className:e.menuButton,color:"inherit","aria-label":"Menu"},a.a.createElement(E.a,null)),a.a.createElement(d.a,{variant:"h6",color:"inherit",className:e.grow},"Exchange"),a.a.createElement(y.a,{color:"inherit",component:function(e){return a.a.createElement(o.a,w({to:"/home"},e))}},"Home"),!this.props.loggedin&&a.a.createElement(y.a,{color:"inherit",component:function(e){return a.a.createElement(o.a,w({to:"/login"},e))}},"Login"),this.props.loggedin&&a.a.createElement("form",{onSubmit:this.onLogout},a.a.createElement(y.a,{type:"submit",color:"inherit"},"Logout")))))}}])&&k(n.prototype,i),t}();j.propTypes={classes:s.a.object.isRequired},t.a=Object(l.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(j)},339:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(156),i=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:60}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"on"},{lightness:30}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ef8c25"},{lightness:40}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#b6c54c"},{lightness:40},{saturation:-40}]}];function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var m=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(n=!(r=c(t).call(this,e))||"object"!==s(r)&&"function"!=typeof r?p(this):r).fetchUser=n.fetchUser.bind(p(p(n))),n.state={lat:1.3521,long:103.8198,place:"",userList:[]},n}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,r.Component),n=t,(o=[{key:"getGoogleMaps",value:function(){return this.googleMapsPromise||(this.googleMapsPromise=new Promise(function(e){window.resolveGoogleMapsPromise=function(){e(google),delete window.resolveGoogleMapsPromise};var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyBPkUDXc8RZJsFsK-lfvjv6m79PHRyaoUI","&libraries=places&callback=resolveGoogleMapsPromise"),t.async=!0,t.defer=!0,document.body.appendChild(t)})),this.googleMapsPromise}},{key:"componentWillMount",value:function(){this.getGoogleMaps(),this.fetchUser()}},{key:"fetchUser",value:function(){var e=this;fetch("api/users").then(function(e){return e.json()}).then(function(t){return e.setState({userList:t})})}},{key:"componentDidMount",value:function(){var e=this;console.log(this.state.userList,"state of userList ~~~~ "),console.log("printing props from maps after maps been mounted",this.props),this.getGoogleMaps().then(function(t){var n=new t.maps.Map(document.getElementById("gmap"),{zoom:12,center:{lat:1.3521,lng:103.8198},styles:i}),r=new t.maps.InfoWindow;function a(e,a){var o="";"B"===e.ordertype&&(o={url:"http://www.iconarchive.com/download/i57834/icons-land/vista-map-markers/Map-Marker-Marker-Outside-Chartreuse.ico",scaledSize:new t.maps.Size(40,40)});var i=new t.maps.LatLng(e.meet_lat,e.meet_long),s=new t.maps.Marker({position:i,map:n,animation:t.maps.Animation.DROP,icon:o});return t.maps.event.addListener(s,"click",function(){r.setContent("<p>Ticker: "+e.ticker+"</p><p>Order type: "+e.ordertype+"</p><p>quantity: "+e.quantity+"</p><p>Good till: "+e.available_till.split("T")[0]+"<p>Counterparty id: "+e.user_id+"</p><p>Counterparty name: "+a+'</p></p><button id="markerButton" data-foo="'+e.user_id+'" onclick="myFunction(event)">Click to chat with me!</button>'),r.open(n,this),s.setAnimation(t.maps.Animation.BOUNCE),setTimeout(function(){s.setAnimation(null)},2e3)}),s}r=new t.maps.InfoWindow;for(var o=[],s=0;s<e.props.result.length;s++){for(var l="",c=0;c<e.state.userList.length;c++)e.state.userList[c].id===parseInt(e.props.result[s].user_id)&&(l=e.state.userList[c].name);e.props.result[s].user_id!==e.props.userid&&(o[s]=a(e.props.result[s],l))}})}},{key:"render",value:function(){return console.log("maps been rendered"),console.log("maps props - see result",this.props),a.a.createElement("div",{style:{width:"100%%",height:500},id:"gmap"})}}])&&l(n.prototype,o),t}(),f=n(208),d=n.n(f);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,g(t).apply(this,arguments))}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,r.Component),n=t,(o=[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("strong",null,"To: ")," ",this.props.to," ",a.a.createElement("strong",null,"From: ")," ",this.props.fromUser," ",a.a.createElement("strong",null,"Text: "),this.props.message)}}])&&y(n.prototype,o),t}(),E=n(24),S=n.n(E),w=n(2),k=n.n(w),O=n(19),P=n(326),C=n.n(P),j=n(327),_=n.n(j),T=n(329),x=n.n(T),R=n(328),M=n.n(R),U=n(22),D=n.n(U),N=n(330),B=n.n(N),I=n(29),q=n.n(I),A=n(6),L=n.n(A),F=n(52),G=n.n(F);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),e}function X(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?V(e):t}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Z=function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit}}},Y=function(e){function t(){var e;return H(this,t),(e=X(this,Q(t).call(this))).changeHandler=e.changeHandler.bind(V(V(e))),e}return K(t,a.a.Component),z(t,[{key:"changeHandler",value:function(){this.props.setSgd(event.target.value)}},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",null,a.a.createElement(G.a,{id:"outlined-number",label:"USD TO SGD",value:Math.round(100*this.props.SGD)/100,onChange:this.changeHandler,type:"number",className:e.textField,InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined"}))}}]),t}();Y.propTypes={classes:k.a.object.isRequired},Y=Object(O.withStyles)(Z)(Y);var $=function(e){function t(){var e;return H(this,t),(e=X(this,Q(t).call(this))).changeHandler=e.changeHandler.bind(V(V(e))),e}return K(t,a.a.Component),z(t,[{key:"changeHandler",value:function(){this.props.setUsd(event.target.value)}},{key:"render",value:function(){var e=this.props.classes;return a.a.createElement("div",null,a.a.createElement(G.a,{id:"outlined-number",label:"SGD TO USD",value:Math.round(100*this.props.USD)/100,onChange:this.changeHandler,type:"number",className:e.textField,InputLabelProps:{shrink:!0},margin:"normal",variant:"outlined"}))}}]),t}();$.propTypes={classes:k.a.object.isRequired},$=Object(O.withStyles)(Z)($);var ee=function(e){function t(){var e;return H(this,t),(e=X(this,Q(t).call(this))).setSgd=e.setSgd.bind(V(V(e))),e.setUsd=e.setUsd.bind(V(V(e))),e.state={USDSGD:"",SGD:"",USD:"",styles:{textDecorationLine:"underline"}},e}return K(t,r.Component),z(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=USD&to_currency=SGD&apikey=".concat("V9CIRQRJSAFI99RM")).then(function(e){return e.json()}).then(function(t){console.log("api result of alphavantage:",t),e.setState({USDSGD:t["Realtime Currency Exchange Rate"]["5. Exchange Rate"]})})}},{key:"setSgd",value:function(e){this.setState({SGD:e,USD:e*parseFloat(this.state.USDSGD)})}},{key:"setUsd",value:function(e){this.setState({USD:e,SGD:e/parseFloat(this.state.USDSGD)})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h2",null,"USDSGD FX: ",a.a.createElement("strong",{style:this.state.styles},this.state.USDSGD.substring(0,5))),a.a.createElement(Y,{setSgd:this.setSgd,SGD:this.state.SGD}),a.a.createElement($,{setUsd:this.setUsd,USD:this.state.USD}))}}]),t}(),te=Object(O.withStyles)(Z)(ee);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var se=function(e){return{root:{flexGrow:1,marginTop:10},card:{width:400,height:345,overflow:"auto",marginTop:0},button:{margin:e.spacing.unit},rightIcon:{marginLeft:e.spacing.unit}}},le=function(e){function t(){var e,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,(e=!(n=ae(t).call(this))||"object"!==ne(n)&&"function"!=typeof n?ie(this):n).state={myUser:null,receiver:null,messages:[],input:"",styles:{borderRadius:5,paddingTop:10,paddingBottom:10,position:"relative",left:8,top:2}},e.handleClick=e.handleClick.bind(ie(ie(e))),e.setMsg=e.setMsg.bind(ie(ie(e))),e}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,r.Component),n=t,(o=[{key:"componentDidUpdate",value:function(e){this.props.messages!=e.messages&&(this.setState({myUser:this.props.user,receiver:this.props.idMarker,messages:this.props.messages}),console.log("is state updated in update? ~~~~~~~~~~~",this.state))}},{key:"componentDidMount",value:function(){this.setState({myUser:this.props.user,receiver:this.props.idMarker,messages:this.props.messages}),console.log(this.state,"states of chatroom ~~~~~~~~"),console.log(this.props,"passing props to chatroom ~~~~~")}},{key:"setMsg",value:function(e){this.setState({input:e.target.value})}},{key:"handleClick",value:function(e){e.preventDefault();var t={message:!0,to:this.props.idMarker,from:this.props.user,fromUser:this.props.username,content:this.state.input};console.log("data from input field ~~~ ",t),this.props.handleMessage(t),this.setState({input:""})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.messages.map(function(t,n){if(e.props.user===t.to||e.props.user===t.from)return a.a.createElement(D.a,{component:"p"},a.a.createElement(v,{message:t.content,to:t.to,from:t.from,fromUser:t.fromUser}))}),r="Chat to User no."+this.props.idMarker;return a.a.createElement(S.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},a.a.createElement(S.a,{item:!0},a.a.createElement(C.a,{className:t.card},a.a.createElement(_.a,null,a.a.createElement(M.a,null,a.a.createElement(D.a,{gutterBottom:!0,variant:"h6",component:"h2"},"Chatroom"),n)),a.a.createElement(x.a,null,a.a.createElement("form",{onSubmit:this.handleClick},a.a.createElement("input",{style:this.state.styles,value:this.state.input,onChange:this.setMsg,placeholder:r}),a.a.createElement(q.a,{type:"submit",variant:"contained",color:"primary",className:t.button},"Send",a.a.createElement(B.a,{className:t.rightIcon},"send")))))),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement(S.a,{item:!0},a.a.createElement(te,null)))}}])&&re(n.prototype,o),t}();le.propTypes={classes:k.a.object.isRequired};var ce=Object(O.withStyles)(se)(le),ue=n(116),pe=n.n(ue),me=n(117),fe=n.n(me),de=n(23),he=n.n(de),ye=n(112),ge=n.n(ye),be=n(118),ve=n.n(be),Ee=n(68),Se=n.n(Ee),we=n(113),ke=n.n(we),Oe=n(59),Pe=n.n(Oe),Ce=n(46),je=n.n(Ce),_e=n(87),Te=n.n(_e),xe=n(32),Re=n.n(xe),Me=n(69),Ue=n.n(Me),De=n(114),Ne=n.n(De),Be=n(115),Ie=n.n(Be),qe=n(66);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t,n){return t&&Fe(e.prototype,t),n&&Fe(e,n),e}function We(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?ze(e):t}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qe(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}var Ke=[{id:"ticker",numeric:!1,disablePadding:!0,label:"Ticker"},{id:"ordertype",numeric:!1,disablePadding:!1,label:"Buy/Sell"},{id:"quantity",numeric:!0,disablePadding:!1,label:"Quantity"},{id:"orderstatus",numeric:!1,disablePadding:!1,label:"Status"},{id:"action",numeric:!1,disablePadding:!1,label:"Action(s)"}],Ve=function(e){function t(){var e,n;Le(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return Xe(ze(ze(n=We(this,(e=He(t)).call.apply(e,[this].concat(a))))),"createSortHandler",function(e){return function(t){n.props.onRequestSort(t,e)}}),n}return Je(t,a.a.Component),Ge(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onSelectAllClick,r=t.order,o=t.orderBy,i=t.numSelected,s=t.rowCount;return a.a.createElement(ge.a,null,a.a.createElement(Se.a,null,a.a.createElement(he.a,{padding:"checkbox"},a.a.createElement(Te.a,{indeterminate:i>0&&i<s,checked:i===s,onChange:n})),Ke.map(function(t){return a.a.createElement(he.a,{key:t.id,numeric:t.numeric,padding:t.disablePadding?"none":"default",sortDirection:o===t.id&&r},a.a.createElement(Ue.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},a.a.createElement(ke.a,{active:o===t.id,direction:r,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}();Ve.propTypes={numSelected:k.a.number.isRequired,onRequestSort:k.a.func.isRequired,onSelectAllClick:k.a.func.isRequired,order:k.a.string.isRequired,orderBy:k.a.string.isRequired,rowCount:k.a.number.isRequired};var Ze=function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(qe.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}},Ye=function(e){var t=e.numSelected,n=e.classes;return a.a.createElement(Pe.a,{className:L()(n.root,Xe({},n.highlight,t>0))},a.a.createElement("div",{className:n.title},t>0?a.a.createElement(D.a,{color:"inherit",variant:"subtitle1"},t," selected"):a.a.createElement(D.a,{variant:"h6",id:"tableTitle"},"Orders")),a.a.createElement("div",{className:n.spacer}),a.a.createElement("div",{className:n.actions},t>0?a.a.createElement(Ue.a,{title:"Delete"},a.a.createElement(Re.a,{"aria-label":"Delete"},a.a.createElement(Ne.a,null))):a.a.createElement(Ue.a,{title:"Filter list"},a.a.createElement(Re.a,{"aria-label":"Filter list"},a.a.createElement(Ie.a,null)))))};Ye.propTypes={classes:k.a.object.isRequired,numSelected:k.a.number.isRequired},Ye=Object(O.withStyles)(Ze)(Ye);var $e=function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}},et=function(e){function t(){var e;return Le(this,t),Xe(ze(ze(e=We(this,He(t).call(this)))),"handleRequestSort",function(t,n){var r=n,a="desc";e.state.orderBy===n&&"desc"===e.state.order&&(a="asc"),e.setState({order:a,orderBy:r})}),Xe(ze(ze(e)),"handleSelectAllClick",function(t){t.target.checked?e.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):e.setState({selected:[]})}),Xe(ze(ze(e)),"handleClick",function(t,n){var r=e.state.selected,a=r.indexOf(n),o=[];-1===a?o=o.concat(r,n):0===a?o=o.concat(r.slice(1)):a===r.length-1?o=o.concat(r.slice(0,-1)):a>0&&(o=o.concat(r.slice(0,a),r.slice(a+1))),e.setState({selected:o})}),Xe(ze(ze(e)),"handleChangePage",function(t,n){e.setState({page:n})}),Xe(ze(ze(e)),"handleChangeRowsPerPage",function(t){e.setState({rowsPerPage:t.target.value})}),Xe(ze(ze(e)),"isSelected",function(t){return-1!==e.state.selected.indexOf(t)}),e.state={order:"asc",orderBy:"ticker",selected:[],data:[],page:0,rowsPerPage:5},e}return Je(t,a.a.Component),Ge(t,[{key:"componentWillMount",value:function(){this.setState({data:this.props.result}),console.log("this the state of enhanced table ~~~~~~~~ ",this.state),console.log("this the props of enhanced table ~~~~~~~~ ",this.props)}},{key:"render",value:function(){var e,t,n,r=this,o=this.props.classes,i=this.state,s=i.data,l=i.order,c=i.orderBy,u=i.selected,p=i.rowsPerPage,m=i.page,f=p-Math.min(p,s.length-m*p),d=this.props.result.filter(function(e){return"active"===e.orderstatus&&e.user_id!=r.props.user});return a.a.createElement(je.a,{className:o.root},a.a.createElement(Ye,{numSelected:u.length}),a.a.createElement("div",{className:o.tableWrapper},a.a.createElement(pe.a,{className:o.table,"aria-labelledby":"tableTitle"},a.a.createElement(Ve,{numSelected:u.length,order:l,orderBy:c,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:s.length}),a.a.createElement(fe.a,null,(e=d,t=function(e,t){return"desc"===l?function(e,n){return Qe(e,n,t)}:function(e,n){return-Qe(e,n,t)}}(0,c),n=e.map(function(e,t){return[e,t]}),n.sort(function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]}),n.map(function(e){return e[0]})).slice(m*p,m*p+p).map(function(e){var t=r.isSelected(e.id);return a.a.createElement(Se.a,{hover:!0,onClick:function(t){return r.handleClick(t,e.id)},role:"checkbox","aria-checked":t,tabIndex:-1,key:e.id,selected:t},a.a.createElement(he.a,{padding:"checkbox"},a.a.createElement(Te.a,{checked:t})),a.a.createElement(he.a,{component:"th",scope:"row",padding:"none"},e.ticker),a.a.createElement(he.a,null,e.ordertype),a.a.createElement(he.a,{numeric:!0},e.quantity),a.a.createElement(he.a,null,e.orderstatus),e.user_id!==r.props.user?"B"===e.ordertype?a.a.createElement(he.a,null,"Sell --\x3e"):a.a.createElement(he.a,null,"Buy --\x3e"):a.a.createElement(he.a,null,"No action"))}),f>0&&a.a.createElement(Se.a,{style:{height:49*f}},a.a.createElement(he.a,{colSpan:6}))))),a.a.createElement(ve.a,{rowsPerPageOptions:[5,10,25],component:"div",count:s.length,rowsPerPage:p,page:m,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}();function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t,n){return t&&rt(e.prototype,t),n&&rt(e,n),e}function ot(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?lt(e):t}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}et.propTypes={classes:k.a.object.isRequired},Object(O.withStyles)($e)(et);var pt=[{id:"ticker",numeric:!1,disablePadding:!0,label:"Ticker"},{id:"ordertype",numeric:!1,disablePadding:!1,label:"Buy/Sell"},{id:"quantity",numeric:!0,disablePadding:!1,label:"Quantity"},{id:"orderstatus",numeric:!1,disablePadding:!1,label:"Status"}],mt=function(e){function t(){var e,n;nt(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return ct(lt(lt(n=ot(this,(e=it(t)).call.apply(e,[this].concat(a))))),"createSortHandler",function(e){return function(t){n.props.onRequestSort(t,e)}}),n}return st(t,a.a.Component),at(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onSelectAllClick,r=t.order,o=t.orderBy,i=t.numSelected,s=t.rowCount;return a.a.createElement(ge.a,null,a.a.createElement(Se.a,null,a.a.createElement(he.a,{padding:"checkbox"},a.a.createElement(Te.a,{indeterminate:i>0&&i<s,checked:i===s,onChange:n})),pt.map(function(t){return a.a.createElement(he.a,{key:t.id,numeric:t.numeric,padding:t.disablePadding?"none":"default",sortDirection:o===t.id&&r},a.a.createElement(Ue.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},a.a.createElement(ke.a,{active:o===t.id,direction:r,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}();mt.propTypes={numSelected:k.a.number.isRequired,onRequestSort:k.a.func.isRequired,onSelectAllClick:k.a.func.isRequired,order:k.a.string.isRequired,orderBy:k.a.string.isRequired,rowCount:k.a.number.isRequired};var ft=function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(qe.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}},dt=function(e){function t(){var e;return nt(this,t),(e=ot(this,it(t).call(this))).handleDelete=e.handleDelete.bind(lt(lt(e))),e}return st(t,r.Component),at(t,[{key:"handleDelete",value:function(){for(var e=this,t=0;t<this.props.selected.length;t++)fetch("/order/".concat(this.props.selected[t],"/cancel"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(){console.log("success in cancelling order!!!!"),e.props.updateOrder()})}},{key:"render",value:function(){var e=this.props,t=e.numSelected,n=e.classes;return a.a.createElement(Pe.a,{className:L()(n.root,ct({},n.highlight,t>0))},a.a.createElement("div",{className:n.title},t>0?a.a.createElement(D.a,{color:"inherit",variant:"subtitle1"},t," selected"):a.a.createElement(D.a,{variant:"h6",id:"tableTitle"},"My Orders")),a.a.createElement("div",{className:n.spacer}),a.a.createElement("div",{className:n.actions},t>0?a.a.createElement(Ue.a,{title:"Delete"},a.a.createElement(Re.a,{onClick:this.handleDelete,"aria-label":"Delete"},a.a.createElement(Ne.a,null))):a.a.createElement(Ue.a,{title:"Filter list"},a.a.createElement(Re.a,{"aria-label":"Filter list"},a.a.createElement(Ie.a,null)))))}}]),t}();dt.propTypes={classes:k.a.object.isRequired,numSelected:k.a.number.isRequired},dt=Object(O.withStyles)(ft)(dt);var ht=function(e){return{root:{width:"100%",marginTop:3*e.spacing.unit},table:{minWidth:1020},tableWrapper:{overflowX:"auto"}}},yt=function(e){function t(){var e;return nt(this,t),ct(lt(lt(e=ot(this,it(t).call(this)))),"handleRequestSort",function(t,n){var r=n,a="desc";e.state.orderBy===n&&"desc"===e.state.order&&(a="asc"),e.setState({order:a,orderBy:r})}),ct(lt(lt(e)),"handleSelectAllClick",function(t){t.target.checked?e.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):e.setState({selected:[]})}),ct(lt(lt(e)),"handleClick",function(t,n){var r=e.state.selected,a=r.indexOf(n),o=[];-1===a?o=o.concat(r,n):0===a?o=o.concat(r.slice(1)):a===r.length-1?o=o.concat(r.slice(0,-1)):a>0&&(o=o.concat(r.slice(0,a),r.slice(a+1))),e.setState({selected:o})}),ct(lt(lt(e)),"handleChangePage",function(t,n){e.setState({page:n})}),ct(lt(lt(e)),"handleChangeRowsPerPage",function(t){e.setState({rowsPerPage:t.target.value})}),ct(lt(lt(e)),"isSelected",function(t){return-1!==e.state.selected.indexOf(t)}),e.state={order:"asc",orderBy:"ticker",selected:[],data:[],page:0,rowsPerPage:5},e}return st(t,a.a.Component),at(t,[{key:"componentWillMount",value:function(){this.setState({data:this.props.result}),console.log("this the state of enhanced table ~~~~~~~~ ",this.state),console.log("this the props of enhanced table ~~~~~~~~ ",this.props)}},{key:"componentDidUpdate",value:function(e){this.props.result!=e.result&&(console.log("updating props for myorders ~~~~~~~",this.props),this.setState({data:this.props.result}))}},{key:"render",value:function(){var e,t,n,r=this,o=this.props.classes,i=this.state,s=i.data,l=i.order,c=i.orderBy,u=i.selected,p=i.rowsPerPage,m=i.page,f=p-Math.min(p,s.length-m*p),d=s.filter(function(e){return e.user_id===r.props.user});return a.a.createElement(je.a,{className:o.root},a.a.createElement(dt,{numSelected:u.length,selected:this.state.selected,updateOrder:this.props.updateOrder}),a.a.createElement("div",{className:o.tableWrapper},a.a.createElement(pe.a,{className:o.table,"aria-labelledby":"tableTitle"},a.a.createElement(mt,{numSelected:u.length,order:l,orderBy:c,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:s.length}),a.a.createElement(fe.a,null,(e=d,t=function(e,t){return"desc"===l?function(e,n){return ut(e,n,t)}:function(e,n){return-ut(e,n,t)}}(0,c),n=e.map(function(e,t){return[e,t]}),n.sort(function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]}),n.map(function(e){return e[0]})).slice(m*p,m*p+p).map(function(e){var t=r.isSelected(e.id);return a.a.createElement(Se.a,{hover:!0,onClick:function(t){return r.handleClick(t,e.id)},role:"checkbox","aria-checked":t,tabIndex:-1,key:e.id,selected:t},a.a.createElement(he.a,{padding:"checkbox"},a.a.createElement(Te.a,{checked:t})),a.a.createElement(he.a,{component:"th",scope:"row",padding:"none"},e.ticker),a.a.createElement(he.a,null,e.ordertype),a.a.createElement(he.a,{numeric:!0},e.quantity),a.a.createElement(he.a,null,e.orderstatus))}),f>0&&a.a.createElement(Se.a,{style:{height:49*f}},a.a.createElement(he.a,{colSpan:5}))))),a.a.createElement(ve.a,{rowsPerPageOptions:[5,10,25],component:"div",count:s.length,rowsPerPage:p,page:m,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}();yt.propTypes={classes:k.a.object.isRequired};var gt=Object(O.withStyles)(ht)(yt),bt=n(331),vt=n.n(bt),Et=n(157),St=n.n(Et),wt=n(155),kt=n.n(wt),Ot=n(337),Pt=n.n(Ot),Ct=n(336),jt=n.n(Ct),_t=n(338),Tt=n.n(_t);function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){return!t||"object"!==xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Mt(t).apply(this,arguments))}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,r.Component),n=t,(o=[{key:"render",value:function(){return a.a.createElement("div",null,this.props.username===this.props.message.from?a.a.createElement("div",{style:{marginBottom:20,textAlign:"right"}},a.a.createElement("span",{style:{borderStyle:"solid",color:"white",borderColor:"#3F51B5",backgroundColor:"#3F51B5",borderWidth:1,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,borderRadius:8}},this.props.message.message)):a.a.createElement("div",{style:{marginBottom:20}},a.a.createElement("span",{style:{borderStyle:"solid",borderColor:"#3F51B5",color:"white",backgroundColor:"#3F51B5",borderWidth:1,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,borderRadius:8}},this.props.message.from,": ",this.props.message.message)))}}])&&Rt(n.prototype,o),t}(),Nt=n(332),Bt=n.n(Nt),It=n(333),qt=n.n(It),At=n(335),Lt=n.n(At),Ft=n(334),Gt=n.n(Ft);function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vt=function(e){return{heading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular}}},Zt=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,r=zt(t).call(this,e),Kt(Qt(Qt(n=!r||"object"!==Wt(r)&&"function"!=typeof r?Qt(this):r)),"handleChange",function(e){n.setState({message:e.target.value})}),Kt(Qt(Qt(n)),"sendMessage",function(e){e.preventDefault(),n.props.socket.emit(n.props.room.room,{room:n.state.room,data:{message:n.state.message,from:n.props.username}}),n.setState({message:""})}),n.state={room:"",messages:[],message:""},n}var n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(t,r.Component),n=t,(o=[{key:"componentWillMount",value:function(){var e=this;if(!1===this.props.room.joined){this.props.socket.emit("joinRoom",this.props.room.room);var t=Ht(this.props.chatrooms),n=t.indexOf(this.props.room);t[n]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Kt(e,t,n[t])})}return e}({},this.props.room),t[n]={room:this.props.room.room,joined:!0},this.props.setJoinedRoom(t)}var r=this.props.socket;this.setState({room:this.props.room.room}),localStorage.getItem(this.props.room.room)&&this.setState({messages:JSON.parse(localStorage.getItem(this.props.room.room))}),r.emit("hello",{room:this.props.room.room,user:this.props.username}),r.on("helloback",function(t){t.room===e.props.room.room&&t.user!==e.props.username&&e.setState({messages:Ht(e.state.messages).concat([{message:"".concat(t.user," has entered the chatroom"),from:"Attn"}])})}),r.on("message",function(t){console.log("data received from server to testing chat",t),t.room===e.props.room.room&&e.setState({messages:Ht(e.state.messages).concat([t.data])})}),r.on("notice",function(t){t.room===e.props.room.room&&e.setState({messages:Ht(e.state.messages).concat([{message:"".concat(t.user," has left the room and will be unable to see your reply"),from:"Attn"}])})})}},{key:"componentWillUnmount",value:function(){localStorage.setItem(this.props.room.room,JSON.stringify(this.state.messages)),this.props.socket.emit("left",{room:this.props.room.room,user:this.props.username})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=this.state.messages.map(function(t,n){return a.a.createElement(Dt,{key:n,message:t,username:e.props.username})});return a.a.createElement(Bt.a,null,a.a.createElement(qt.a,{expandIcon:a.a.createElement(Gt.a,null)},a.a.createElement(D.a,{className:t.heading},"Room: ",this.props.room.room)),a.a.createElement(Lt.a,null,a.a.createElement("div",{style:{width:"100%"}},n,a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.sendMessage},a.a.createElement("input",{style:{borderRadius:5,width:"100%"},value:this.state.message,onChange:this.handleChange}))))))}}])&&Jt(n.prototype,o),t}();Zt.propTypes={classes:k.a.object.isRequired};var Yt=Object(O.withStyles)(Vt)(Zt);function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function en(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function an(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function on(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(){return(sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ln=function(e){return{button:{margin:e.spacing.unit},extendedIcon:{marginRight:e.spacing.unit},root:{flexGrow:1,marginLeft:10,marginRight:10},root1:{width:"400"},appBar:{position:"relative"},flex:{flex:1}}};function cn(e){return a.a.createElement(jt.a,sn({direction:"up"},e))}var un=function(e){function t(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this,r=nn(t).call(this,e),on(an(an(n=!r||"object"!==$t(r)&&"function"!=typeof r?an(this):r)),"handleChatOpen",function(){n.setState({chatPopup:!0})}),on(an(an(n)),"handleChatClose",function(){n.setState({chatPopup:!1})}),on(an(an(n)),"setJoinedRoom",function(e){n.setState({chatrooms:e})}),on(an(an(n)),"handleClickOpen",function(e){return function(){n.setState({displayadd:!0,scroll:e})}}),on(an(an(n)),"handleClickClose",function(){console.log("checking if display add order is closed ~~~~~~~~~~~~~~~~~~~"),n.setState({displayadd:!1})}),n.updateOrder=n.updateOrder.bind(an(an(n))),n.handleClickDisplay=n.handleClickDisplay.bind(an(an(n))),n.handleMessage=n.handleMessage.bind(an(an(n))),n.handleClickClose=n.handleClickClose.bind(an(an(n))),n.state={result:[],displayadd:!1,scroll:"paper",displaychat:!1,messages:[],socket:null,chatrooms:[],chatPopup:!1},n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(t,r.Component),n=t,(i=[{key:"setMsgs",value:function(e){this.setState({messages:en(this.state.messages).concat([e])})}},{key:"handleChat",value:function(e){this.setState({displaychat:e})}},{key:"updateOrder",value:function(){var e=this;fetch("api/orders").then(function(e){return e.json()}).then(function(t){return e.setState({result:t},function(){return console.log("result of fetch:",t)})})}},{key:"readCookie",value:function(e){for(var t={},n=e.split(";"),r=0;r<n.length;r++){var a=n[r].split("=");t[a[0]]=a[1]}return t}},{key:"compare",value:function(e,t){return parseInt(t)>parseInt(e)?"".concat(e,"to").concat(t):"".concat(t,"to").concat(e)}},{key:"componentDidUpdate",value:function(e){if(this.props.idMarker!=e.idMarker){var t=this.compare(this.props.user,this.props.idMarker),n=!1;this.state.chatrooms.forEach(function(e){e.room===t&&(n=!0)}),!1===n&&(this.setState({chatrooms:en(this.state.chatrooms).concat([{room:t,joined:!0}])}),this.state.socket.emit("joinRoom",t))}}},{key:"componentDidMount",value:function(){var e=this;this.updateOrder();var t=this.readCookie(document.cookie);t.logged_in&&(this.props.setLogin(!0),this.props.setUser(parseInt(t[" user_id"])),this.props.setUsername(t[" username"]));var n=d()("/");this.setState({socket:n}),n.on("success",function(t){if(console.log("success in joining room: ".concat(t)),t.split("to").includes(e.props.user.toString())){var n=!1;e.state.chatrooms.forEach(function(e){e.room===t&&(n=!0)}),!1===n&&e.setState({chatrooms:en(e.state.chatrooms).concat([{room:t,joined:!1}])})}console.log("current chat rooms ~~~ ",e.state.chatrooms)}),n.on("added order",function(t){!0===t.addOrder?(console.log("testing if orders live updating works ~~~~~~~"),fetch("api/orders").then(function(e){return e.json()}).then(function(t){return e.setState({result:t},function(){return console.log("result of fetch:",t)})})):!0===t.message?(console.log("display the messages from chat pls ~~~~~~~"),e.setState({messages:en(e.state.messages).concat([t])})):console.log("nothing here to see ~~~~~")})}},{key:"handleMessage",value:function(e){d()("/").emit("added order",e)}},{key:"handleClickDisplay",value:function(e){this.setState({displayadd:e})}},{key:"render",value:function(){var e=this,t=this.props.classes,n=[];return this.state.result.filter(function(t){return"active"===t.orderstatus&&t.user_id!=e.props.user}).map(function(e,t){var r=[];r.push(e.ticker),r.push(e.ordertype),r.push(e.quantity),r.push(e.orderstatus),"B"===e.ordertype?r.push("Sell --\x3e"):"S"===e.ordertype&&r.push("Buy --\x3e"),n.push(r)}),a.a.createElement(r.Fragment,null,a.a.createElement(St.a,{fullScreen:!0,open:this.state.chatPopup,onClose:this.handleChatClose,TransitionComponent:cn},a.a.createElement(kt.a,{className:t.appBar},a.a.createElement(Pe.a,null,a.a.createElement(Re.a,{color:"inherit",onClick:this.handleChatClose,"aria-label":"Close"},a.a.createElement(Pt.a,null)),a.a.createElement(D.a,{variant:"h6",color:"inherit",className:t.flex},"Chatbox"),a.a.createElement(q.a,{color:"inherit",onClick:this.handleChatClose},"Close"))),a.a.createElement("div",{className:t.root1},this.state.chatrooms.map(function(t,n){return a.a.createElement(Yt,{key:n,room:t,user:e.props.user,username:e.props.username,socket:e.state.socket,chatrooms:e.state.chatrooms,setJoinedRoom:e.setJoinedRoom})}))),a.a.createElement("div",{className:t.root},a.a.createElement(S.a,{container:!0,spacing:32},this.state.result.length>0&&a.a.createElement(S.a,{item:!0,xs:12},a.a.createElement(m,{result:this.state.result,userid:this.props.user})),this.state.displayadd&&a.a.createElement(o.a,{user:this.props.user,displayClose:this.handleClickClose,update:this.updateOrder,displayadd:this.state.displayadd}),this.state.result.length>0&&a.a.createElement(S.a,{item:!0,xs:12,sm:8},a.a.createElement(vt.a,{title:"All Orders",data:n,columns:["ticker","Buy/Sell","quantity","orderstatus","action"],options:{filterType:"checkbox"}}),a.a.createElement(gt,{user:this.props.user,result:this.state.result,updateOrder:this.updateOrder})),a.a.createElement(S.a,{item:!0,xs:12,sm:4},a.a.createElement(S.a,{container:!0,direction:"rows",justify:"space-evenly",alignItems:"center"},a.a.createElement(S.a,{item:!0},a.a.createElement("div",null,this.props.loggedin&&a.a.createElement(q.a,{style:{position:"relative"},className:t.button,onClick:this.handleClickOpen(this.state.scroll),variant:"fab",color:"primary",mini:!0},a.a.createElement(Tt.a,null)))),a.a.createElement(S.a,{item:!0},a.a.createElement("div",null,this.props.loggedin&&a.a.createElement(q.a,{className:t.button,onClick:this.handleChatOpen},"Chatroom")))),a.a.createElement("br",null),a.a.createElement("br",null),this.state.displaychat?a.a.createElement(ce,{username:this.props.username,user:this.props.user,idMarker:this.props.idMarker,messages:this.state.messages,setMsgs:this.state.setMsgs,handleMessage:this.handleMessage}):a.a.createElement(S.a,{container:!0,direction:"column",justify:"space-evenly",alignItems:"center"},a.a.createElement(S.a,{item:!0},a.a.createElement(te,null)))))))}}])&&tn(n.prototype,i),t}();un.propTypes={classes:k.a.object.isRequired},t.a=Object(O.withStyles)(ln)(un)},341:function(e,t,n){e.exports=n(342)},342:function(e,t,n){"use strict";n.r(t),n(343),n(545),n(887);var r=n(0),a=n.n(r),o=n(35),i=n.n(o),s=n(309);n(892),i.a.render(a.a.createElement(s.a,null),document.getElementById("app"))},819:function(e,t){},892:function(e,t){e.exports={"pac-container":"style_pac-container_11e13"}}});